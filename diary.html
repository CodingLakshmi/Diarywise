<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="styles.css">
		<script type="module" src="script.js"></script>
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Arapey&family=Karma&family=Lato&family=Montserrat&family=Raleway&display=swap" rel="stylesheet">
		<link rel="icon" href="Diarywise_favicon.png" type="image/x-icon" sizes="32x32" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
		<style>

		</style>
		<script>
			/* Ask the server for the data by its name we gave it */
			/* Putting the data into an array so that we can easily count the entries */
			async function load() {
				const resp = await fetch('/~/DiaryCreatorGroupProject/account/entries?all=true')
				window.json = await resp.json();
				console.log(json);
				const html =
					`
				<!--In every entry it display's this part-->
				<h2>Welcome {{username}}!</h2>
				<h2>Today's date is: {date}</h2>
				<!--Form to add a file one of the features:-->
				<div class="form">
					<div class="dropdown">
						<button class="btn btn-primary">Fonts</button>
						<div class="dropdown-content">
							<a onclick = "Helvetica()">Helvetica</a>
							<a onclick = "Futura()">Futura</a>
							<a onclick = "Calibri()">Calibri</a>
							<a onclick = "Garamond()">Garamond</a>
							<a onclick = "TimesNewRoman()">Times New Roman</a>
							<a onclick = "TradeSecrets()">Trade Secrets</a>
							<a onclick = "Arial()">Arial</a>
							<a onclick = "Cambria()">Cambria</a>
							<a onclick = "Verdana()">Verdana</a>
							<a onclick = "Rockwell()">Rockwell</a>
							<a onclick = "FranklinGothic()">Franklin Gothic</a>
						</div>
					</div>
					<div class="dropdown2">
						<button class="btn btn-primary">Size</button>
						<div class="dropdown2-content">
							<a onclick = "fiveSize()"> 5 </a>
							<a onclick = "tenSize()"> 10 </a>
							<a onclick = "twelveSize()"> 12</a>
							<a onclick = "fourteenSize()"> 14 </a>
							<a onclick = "sixteenSize()"> 16</a>
							<a onclick = "eighteenSize()"> 18 </a>
							<a onclick = "twentySize()"> 20 </a>
							<a onclick = "twentyfiveSize()"> 25 </a>
							<a onclick = "thirtySize()"> 30 </a>
							<a onclick = "fourtySize()"> 40 </a>
						</div>
					</div>
					<div class="dropdown3">
						<button class="btn btn-primary">Font Color</button>
						<div class="dropdown3-content">
							<a onclick = "blackColor()"> Black </a>
							<a onclick = "whiteColor()"> White </a>
							<a onclick = "greyColor()"> Grey </a>
							<a onclick = "blueColor()"> Blue </a>
							<a onclick = "redColor()"> Red </a>
							<a onclick = "purpleColor()"> Purple </a>
							<a onclick = "pinkColor()"> Pink </a>
							<a onclick = "greenColor()"> Green </a>
						</div>
					</div>
					<textarea class="textarea {style}" style="text-align:left" id="writing" data-id="{id}">{contents}</textarea>
					<br>
					<input type = 'file' name = 'files' class = "filesInput">
					<br>
					<button onclick = "save(this)" class = "btn btn-danger"> Submit Form </button>
					<input type='hidden' name='redirecturl' value='DiaryEntryThanks.html'>
					<input type='hidden' name='survey' value='Diary Entry'>
					<br>
					<hr class = "hr-dotted">
					<br>
				</div>
				`
				var dates = json.map(item => item.date);
				var i = 0;
				var uniqueDates = new Set(dates);
				for (var d of uniqueDates) {
					var div = document.createElement('div');
					var contents = json[i].contents
					var style = json[i].style;
					// var fileName = json[i].fileName;
					// var file = json[i].file.replaceAll("'", "\\'");
					var id = json[i++]._id;
					div.innerHTML = html
						.replace("{date}", d)
						.replace("{id}", id)
						.replace("{contents}", contents)
						.replace("{style}", style);
					// .replace("{fileName}", fileName)
					// .replace("{file}", file)
					document.getElementById('entries')
						.appendChild(div);
				}
			}
		</script>
	</head>

	<body onload='loadTheme()'>

		<div class="nav-box">
			<!--Navigation Bar-->
			<nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
				<a class="navbar-brand" href="https://www.enviremadstar.com/~/DiaryCreatorGroupProject/index">
					<img src="Diarywise_Logo.png" width="30" height="30" class="d-inline-block align-top logo-diarywise" alt="Diarywise Logo">
					Diarywise
				</a>

				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
					<div class="navbar-nav">
						<a class="nav-link" href="https://www.enviremadstar.com/~/DiaryCreatorGroupProject/index">Home <span class="sr-only">(current)</span></a>
						<a class="nav-link" href="https://www.enviremadstar.com/~/DiaryCreatorGroupProject/calender_Test">Calender</a>
						<a class="nav-link" href="https://www.enviremadstar.com/~/DiaryCreatorGroupProject/settings">Settings</a>
					</div>
				</div>

				<!--Form-->
				<form type="post" action="signup.html">
					<input class="btn btn-outline-accent my-2 my-sm-0 btn-outline-danger" type="submit" value="Sign Up" role="button">

					<!--Logout-->
					<a href='/~/DiaryCreatorGroupProject/logout' class="btn btn-outline-success">Log Out</a>
				</form>
			</nav>
		</div>

		<!--for the br change it using the CSS, margin-bottom-->
		<br>
		<br>

		<div id="entries">

		</div>

		<footer>
			<br>
			<h1> Diarywise. </h1>
			<br>
			<p class="description-footer">
				Diarywise is a safe place to write a diary entry.
			</p>
			<br>
			<center>
				<a class="btn btn-light" href="contact.html">Contact</a>
			</center>
			<br>
			<br>
			<center>
				<div class="icons">
					<a href="https://www.linkedin.com/in/lakshmi-pachipulusu-22001620b/" class="link-footer">
						<img src="Images/linkedln_logo.png" alt="lakshmi's linkedln profile" class="linkedln">
					</a>
					<a href="https://github.com/CodingLakshmi" class="link-footer">
						<img src="Images/github_icon_img.jpg" alt="lakshmi's github profile" class="github">
					</a>
					<a href="https://devpost.com/Fantasy35" class="link-footer">
						<img src="Images/Devpost_icon_img.png" alt="lakshmi's devpost portfolio" class="devpost">
					</a>
				</div>
			</center>
		</footer>

		<script>
			load();
		</script>
	</body>

</html>